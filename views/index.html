<!DOCTYPE html>
<html lang="en-US">
<head>
    <title>Metric Imperial Converter</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./public/style.css">
</head>
<body>
<header>
    <h1>
        ISQA_2 - Metric/Imp Converter
    </h1>
</header>
<div id='userstories' style='margin-left: 5%; margin-top: 5%'>
    <h3>Example usage:</h3>
    <code>/api/convert?input=4gal</code><br>
    <code>/api/convert?input=1/2km</code><br>
    <code>/api/convert?input=5.4/3lbs</code><br>
    <code>/api/convert?input=kg</code><br>
    <h3>Example return:</h3>
    <code>{initNum: 3.1, initUnit: 'mi', returnNum: 5.0000008, returnUnit: 'km',
        string: '3.1 miles converts to 5.00002 kilometers'}</code>
</div>
<hr style='margin: 50px'>
<div id='testui' style='margin-left: 5%'>
    <h2 style="text-align: left">Front-End:</h2>
    <form id="convertForm" class="border" action="/api/convert" method="get">
        <input type="text" id="convertField" name="input" placeholder="3.1mi"
               style="width: 200px">
        <input id="convert" type="submit" value='Convert!'>
    </form>
    <p id='result'></p>
    <code id='jsonResult'></code>
</div>
<hr style='margin: 50px; margin-top: 200px'>
<script>
  const form = document.querySelector('#convertForm')
  const input = document.querySelector('#convertField')
  const result = document.querySelector('#result')
  const jsonResult = document.querySelector('#jsonResult')

  form.addEventListener('submit', function (event) {
    event.preventDefault()
    const url = `${form.action}?${input.name}=${input.value}`
    fetch(url)
      .then(response => response.json())
      .then(data => {
        result.textContent = data.string || data.error || data
        jsonResult.textContent = JSON.stringify(data)
        input.value = ''
      })
      .catch(console.error)
  }, false)
</script>
</body>
</html>
